---
title: "Untitled"
author: "Aaron Owen"
date: "10/19/2017"
output: html_document
---

```{r}
library(ggplot2)
library(dplyr)
profs = read.csv("profs.csv")
profs = profs %>% select(-X, -X.1)
```

```{r}
head(profs)
```

```{r}
profs["total_tags"] = apply(profs[10:29], 1, sum, na.rm = T)
```

```{r}
grouped_profs = 
    profs %>% group_by(name) %>% 
        summarise_if(is.numeric, mean, na.rm = T) %>% 
        mutate(
           acc.out.class.prop = accessible.outside.class/total_tags * 100,
           amaz.lect.prop = amazing.lectures/total_tags * 100,
           pop.quiz.prop = beware.of.pop.quizzes/total_tags * 100,
           caring.prop = caring/total_tags * 100,
           grad.crit.prop = clear.grading.criteria/total_tags * 100,
           ext.cred.prop = extra.credit/total_tags * 100,
           read.prop = get.ready.to.read/total_tags * 100,
           feedback.pop = gives.good.feedback/total_tags * 100,
           few.things.prop = graded.by.few.things/total_tags * 100,
           group.proj.prop = group.projects/total_tags * 100,
           hilarious.pop = hilarious/total_tags * 100,
           inspirational.prop = inspirational/total_tags * 100,
           lecture.heavy.prop = lecture.heavy/total_tags * 100,
           homework.prop = lots.of.homework/total_tags * 100,
           participation.prop = participation.matters/total_tags * 100,
           respected.prop = respected/total_tags * 100,
           skip.class.prop = skip.class.you.wont.pass/total_tags * 100,
           many.papers.prop = so.many.papers/total_tags * 100,
           test.heavy.prop = test.heavy/total_tags * 100,
           tough.grader.prop = tough.grader/total_tags * 100)
```

```{r}
grouped_profs = grouped_profs %>% rename(overall_score_mean = overall_score, difficulty_score_mean = difficulty_score)
grouped_profs[, -(4:24)]
```

```{r}
merge(profs, grouped_profs[, -(4:24)], by = "name")
```

```{r}
profs %>% group_by(school, sex) %>% summarise(mean(overall_score), mean(difficulty_score))
```

```{r}
head(profs)
```

```{r}
profs %>% # filter(department == "Mathematics") %>%
    ggplot(aes(x = difficulty_score, y = overall_score)) + 
    geom_point(aes(color = sex), position = "jitter")# + geom_smooth(method = "lm")
ggplot(profs, aes(x = difficulty_score, y = overall_score)) + geom_bin2d()
ggplot(profs, aes(x = difficulty_score, y = overall_score)) + geom_raster(aes(fill = department))
```

```{r}
profs %>% filter(department == "Science") %>% summarise(count = n())
unique(profs$department)
```

```{r}
profs %>% filter(department == "Chemistry") %>% group_by(sex) %>% summarise(mean(overall_score), mean(difficulty_score))
```

```{r}
nrow(as.data.frame(table(profs$overall_score, profs$difficulty_score)))
# chisq.test(profs$overall_score, profs$difficulty_score)
```

```{r}
profs2 = read.csv("profs_tags.csv", stringsAsFactors = F)
profs2 = profs2 %>% select(-X)
```

```{r}
class(profs2)
```

```{r}
x = (profs2 %>% filter(name == "Svoronos, Paris") %>% select(tag_dict))[1, ]
x
```

```{r}
x = gsub('\\{|}', "", x)
tags_split = strsplit(x, ", ")[[1]]
tags_split = gsub("'", "", tags_split)
tags_split = gsub('"', "", tags_split)
gsub(":", " =", tags_split)
```

```{r}
# strsplit(tags_split[1], ": ")[[1]]
# single_tag
as.list(c("a" = "54", "b" = "123"))
```

```{r}
x
```

```{r}
tags_split = strsplit(x, ", ")[[1]]
tags_split = gsub("'", "", tags_split)
tags_split = gsub('"', "", tags_split)
tags_split = strsplit(tags_split, ": ", ",")
tags_split = unlist(tags_split)
```

```{r}
as.list(c("a" = "54", "b" = "123"))
tags_split[1]
class(tags_split[2])
as.list(c(tags_split[1] = tags_split[2]))
```

```{r}
new = read.csv("abc.csv")
new = new %>% select(-X, -X.1)
```

```{r}
head(new)
```

```{r}
class(NA)
```

```{r}
sum(new[, c(11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 30)][1, ], na.rm = T)
```


















